--TEST--
powmod()
--FILE--
<?php
require_once __DIR__ . '/../include.inc';

use BcMath\Number;

$bases = [
    new Number(0),
    new Number(-1),
    new Number('3'),
    new Number('-5'),
];

$exponents = [
    0,
    '3',
    new Number('4'),
];

$mods = [
    2,
    '-3',
    new Number('7'),
];

$scales = [
    ['scale is null', null],
    ['scale is 1', 1],
    ['scale is 5', 5],
];

foreach ($scales as [$label, $scale]) {
    echo "========== {$label} ==========\n";
    foreach ($bases as $base) {
        foreach ($exponents as $exponent) {
            foreach ($mods as $mod) {
                $ret = "{$base} ** {$exponent} % {$mod}: ";
                $ret = str_pad($ret, 14, ' ', STR_PAD_LEFT);
                $calcRet = $base->powmod($exponent, $mod, $scale);
                $leadingPad = substr($calcRet->value, 0, 1) !== '-' ? ' ' : '';
                $ret .= $leadingPad . $calcRet . "\n";
                echo $ret;
            }
        }
    }
    echo "\n";
}
?>
--EXPECT--
========== scale is null ==========
  0 ** 0 % 2:  1
 0 ** 0 % -3:  1
  0 ** 0 % 7:  1
  0 ** 3 % 2:  0
 0 ** 3 % -3:  0
  0 ** 3 % 7:  0
  0 ** 4 % 2:  0
 0 ** 4 % -3:  0
  0 ** 4 % 7:  0
 -1 ** 0 % 2:  1
-1 ** 0 % -3:  1
 -1 ** 0 % 7:  1
 -1 ** 3 % 2: -1
-1 ** 3 % -3: -1
 -1 ** 3 % 7: -1
 -1 ** 4 % 2:  1
-1 ** 4 % -3:  1
 -1 ** 4 % 7:  1
  3 ** 0 % 2:  1
 3 ** 0 % -3:  1
  3 ** 0 % 7:  1
  3 ** 3 % 2:  1
 3 ** 3 % -3:  0
  3 ** 3 % 7:  6
  3 ** 4 % 2:  1
 3 ** 4 % -3:  0
  3 ** 4 % 7:  4
 -5 ** 0 % 2:  1
-5 ** 0 % -3:  1
 -5 ** 0 % 7:  1
 -5 ** 3 % 2: -1
-5 ** 3 % -3: -2
 -5 ** 3 % 7: -6
 -5 ** 4 % 2:  1
-5 ** 4 % -3:  1
 -5 ** 4 % 7:  2

========== scale is 1 ==========
  0 ** 0 % 2:  1.0
 0 ** 0 % -3:  1.0
  0 ** 0 % 7:  1.0
  0 ** 3 % 2:  0.0
 0 ** 3 % -3:  0.0
  0 ** 3 % 7:  0.0
  0 ** 4 % 2:  0.0
 0 ** 4 % -3:  0.0
  0 ** 4 % 7:  0.0
 -1 ** 0 % 2:  1.0
-1 ** 0 % -3:  1.0
 -1 ** 0 % 7:  1.0
 -1 ** 3 % 2: -1.0
-1 ** 3 % -3: -1.0
 -1 ** 3 % 7: -1.0
 -1 ** 4 % 2:  1.0
-1 ** 4 % -3:  1.0
 -1 ** 4 % 7:  1.0
  3 ** 0 % 2:  1.0
 3 ** 0 % -3:  1.0
  3 ** 0 % 7:  1.0
  3 ** 3 % 2:  1.0
 3 ** 3 % -3:  0.0
  3 ** 3 % 7:  6.0
  3 ** 4 % 2:  1.0
 3 ** 4 % -3:  0.0
  3 ** 4 % 7:  4.0
 -5 ** 0 % 2:  1.0
-5 ** 0 % -3:  1.0
 -5 ** 0 % 7:  1.0
 -5 ** 3 % 2: -1.0
-5 ** 3 % -3: -2.0
 -5 ** 3 % 7: -6.0
 -5 ** 4 % 2:  1.0
-5 ** 4 % -3:  1.0
 -5 ** 4 % 7:  2.0

========== scale is 5 ==========
  0 ** 0 % 2:  1.00000
 0 ** 0 % -3:  1.00000
  0 ** 0 % 7:  1.00000
  0 ** 3 % 2:  0.00000
 0 ** 3 % -3:  0.00000
  0 ** 3 % 7:  0.00000
  0 ** 4 % 2:  0.00000
 0 ** 4 % -3:  0.00000
  0 ** 4 % 7:  0.00000
 -1 ** 0 % 2:  1.00000
-1 ** 0 % -3:  1.00000
 -1 ** 0 % 7:  1.00000
 -1 ** 3 % 2: -1.00000
-1 ** 3 % -3: -1.00000
 -1 ** 3 % 7: -1.00000
 -1 ** 4 % 2:  1.00000
-1 ** 4 % -3:  1.00000
 -1 ** 4 % 7:  1.00000
  3 ** 0 % 2:  1.00000
 3 ** 0 % -3:  1.00000
  3 ** 0 % 7:  1.00000
  3 ** 3 % 2:  1.00000
 3 ** 3 % -3:  0.00000
  3 ** 3 % 7:  6.00000
  3 ** 4 % 2:  1.00000
 3 ** 4 % -3:  0.00000
  3 ** 4 % 7:  4.00000
 -5 ** 0 % 2:  1.00000
-5 ** 0 % -3:  1.00000
 -5 ** 0 % 7:  1.00000
 -5 ** 3 % 2: -1.00000
-5 ** 3 % -3: -2.00000
 -5 ** 3 % 7: -6.00000
 -5 ** 4 % 2:  1.00000
-5 ** 4 % -3:  1.00000
 -5 ** 4 % 7:  2.00000
